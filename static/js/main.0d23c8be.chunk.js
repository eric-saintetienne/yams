(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(7),o=n.n(l),s=n(1),c=n(2),i=n(4),u=n(3),m=n(5),p=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({width:this.elem.clientWidth,offsetX:this.elem.getBoundingClientRect().left})}},{key:"render",value:function(){var e=this,t="";return this.props.class&&(t="_"+this.props.class),this.props.header&&(t+=" Header"),this.props.readonly&&(t+=" ro"),this.props.annule&&(t+=" line"),void 0===this.props.tap?r.a.createElement("td",{ref:function(t){return e.elem=t},className:t},this.props.value):r.a.createElement("td",{ref:function(t){return e.elem=t},className:t,onClick:function(t){e.props.tap(t,e)}},this.props.value)}}]),t}(a.Component),d=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.empty?void 0:r.a.createElement("button",{id:"new_game",onClick:this.props.new_game},"Remettre",r.a.createElement("br",null),"\xe0 Z\xe9ro"),t=this.props.players?r.a.createElement("span",null,"Ajouter un",r.a.createElement("br",null),"autre Joueur"):r.a.createElement("span",null,"Ajouter",r.a.createElement("br",null),"un Joueur");return r.a.createElement("tr",{id:"ToolBar"},r.a.createElement("td",{width:"100%",colSpan:this.props.cols+1},r.a.createElement("button",{id:"new_player",onClick:this.props.show_new_player},t),e,r.a.createElement("button",{id:"fullscreen",onClick:this.props.toggle_fullscreen},"Plein",r.a.createElement("br",null),"\xc9cran")))}}]),t}(a.Component);function h(e,t){var n=!1;return e.map(function(e){return e===t&&(n=!0),null}),n}var _=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.rows;this.props.players.map(function(e,t){return e.figures=0,e.bonus=0,e.total=0,null}),t=this.props.players&&this.props.players.length?t.map(function(t,n){if("-"===String(t)[0])return r.a.createElement("tr",{className:"sep",key:t});var a=t;return void 0!==e.props.rowname[t]&&(a=e.props.rowname[t]),r.a.createElement("tr",{key:t,id:"row_"+t},r.a.createElement(p,{header:!0,key:"header-"+t,readonly:h(e.props.readonly,t),value:a}),e.props.players.map(function(n,a){var l,o=!1;if(t in n)switch(l=n[t],t){case 1:case 2:case 3:case 4:case 5:case 6:n.total+=(l+3)*t,(l*=t)>=0?(l="\xa0"+l)<10&&(l+="\xa0"):l>-10&&(l+="\xa0");break;case"chance":case"brelan":case"pt_suite":case"gr_suite":case"full":case"carre":case"yams":"annule"!==l&&void 0!==l&&(n.figures+=l)}else l="";var s=(1 in n)+(2 in n)+(3 in n)+(4 in n)+(5 in n)+(6 in n);switch(t){case"total":l=s>0?n[t]=n.total:"";break;case"bonus":l=6===s?n[t]=n.total>63?35:0:"";break;case"diff":l=1 in n&&"mini"in n&&"MAXI"in n?n[t]=(n.MAXI-n.mini)*(n[1]+3):"";break;case"TOTAL":l=n.figures+n.total,6===s&&(l+=n.bonus),1 in n&&"mini"in n&&"MAXI"in n&&(l+=n.diff),0===l&&(l="")}return"annule"===l&&(o=!0,l=""),r.a.createElement(p,{key:n.name+"-"+t,class:t,value:l,annule:o,tap:e.props.tap,player:n.name})}),r.a.createElement("td",{className:"Gluton"}))}):[];var n=!this.props.players.reduce(function(e,t){return e+Object.keys(t).reduce(function(e,t){return e+1},0)-4},0);return r.a.createElement("table",{key:"board",className:"Board"},r.a.createElement("tbody",{key:"board-body"},t,r.a.createElement(d,{key:"toolbar",cols:t.length,empty:n,players:this.props.players.length,show_new_player:this.props.show_new_player,new_game:this.props.new_game,toggle_fullscreen:this.props.fullscreen})))}}]),t}(a.Component),f=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).event_blackhole=function(e){return e.preventDefault(),e.stopPropagation(),!1},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={width:this.props.width,height:this.props.height};return r.a.createElement("div",{className:"modal",onClick:this.props.close.bind(this)},r.a.createElement("div",{className:"content",style:e,onClick:this.event_blackhole},this.props.children))}},{key:"componentDidMount",value:function(){this.props.focus&&this.props.focus()}}]),t}(r.a.Component);n(13);function y(e){return e.map(function(e,t){return{val:e,index:t}})}var b=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).add_player=function(t,n){var a,r;t.preventDefault(),""===(a=(a=void 0===n?(r=e.textInput.value,String(r).replace(/^\s+|\s+$/g,"")):n).toLowerCase())?alert("Entrez un nom de joueur !"):0===e.state.players.filter(function(e){return e.name===a}).length?(console.log("Joueur ajout\xe9: ",a),e.state.players.push({name:a}),e.toggle_modal_new_player()):alert("Le joueur "+a+" existe d\xe9ja !")},e.rename_player=function(t,n){t.preventDefault();var a=e.state.show_modal_rename_player_name,r=void 0===n?e.state.show_modal_rename_player_new_name:n;if(r=r.toLowerCase(),console.log("rename:",a,"--\x3e",r),0!==e.state.players.filter(function(e){return e.name===r}).length)return console.log(r,a),void(r===a?alert("Choisissez un nom diff\xe9rent !"):alert("Le joueur "+r+" existe d\xe9ja !"));var l=y(e.state.players).filter(function(e){return e.val.name===a});if(0!==l.length){var o=l[0].index,s=e.state;s.players[o].name=r,s.show_modal_rename_player=!s.show_modal_rename_player,e.setState(s)}else alert("Erreur : player "+a+" not found in App state")},e.delete_player=function(t,n){t.preventDefault();var a=e.state.show_modal_rename_player_name;if(window.confirm('Vraiment supprimer le joueur "'+a+'" ?')){console.log("del player",a);var r=y(e.state.players).filter(function(e){return e.val.name===a});if(0===r.length)return void alert("Erreur : player "+a+" not found in App state");var l=r[0].index,o=e.state;o.players.splice(l,1),o.show_modal_rename_player=!o.show_modal_rename_player,e.setState(o)}else console.log("deletion of player",a,"cancelled")},e.toggle_modal_new_player=function(){e.setState({show_modal_new_player:!e.state.show_modal_new_player})},e.toggle_modal_rename_player=function(){e.setState({show_modal_rename_player:!e.state.show_modal_rename_player})},e.rename_change=function(t){e.setState({show_modal_rename_player_new_name:e.textInput.value})},e.new_game=function(t){if(t.preventDefault(),window.confirm("Remettre \xe0 z\xe9ro ?")){console.log("new game");var n=[];e.state.players.forEach(function(e,t,a){n.push({name:e.name})}),e.setState({players:n})}else console.log("new game cancelled")},e.cell_tapped=function(t,n){var a=n.props.class,r=n.props.player;if("name"===a)e.setState({show_modal_rename_player_new_name:r,show_modal_rename_player_name:r,show_modal_rename_player:!0});else{var l=t.clientX-n.state.offsetX<n.state.width/2;e.process_tap(r,a,l)}},e.process_tap=function(e,t,n){console.log(e,"tapped on",'"'+t+'"',n?"left":"right");var a=y(this.state.players).filter(function(t){return t.val.name===e});if(0!==a.length){var r,l,o,s=a[0].index,c=!1;switch(t){case 1:case 2:case 3:case 4:case 5:case 6:-4!==(l=void 0===(r=this.state.players[s][""+t])?n?-1:0:n?r-1:r+1)&&3!==l||(c=!0);break;case"brelan":case"pt_suite":case"gr_suite":case"full":case"carre":case"yams":void 0===(r=this.state.players[s][t])?l={brelan:10,pt_suite:20,gr_suite:25,full:30,carre:40,yams:50}[t]:"annule"===r?c=!0:l="annule";break;case"mini":case"MAXI":case"chance":4!==(l=void 0===(r=this.state.players[s][t])?{mini:n?10:11,MAXI:n?24:25,chance:n?17:18}[t]:n?r-1:r+1)&&31!==l||(c=!0);break;default:return}o=this.state,c?delete o.players[s][t]:o.players[s][t]=l,this.setState(o)}else alert("Erreur : player "+e+" not found in App state")},e.state={rows:["name",1,2,3,4,5,6,"total","bonus","-1","mini","MAXI","diff","-2","chance","-3","brelan","pt_suite","gr_suite","full","carre","yams","-4","TOTAL"],rowname:{name:"",diff:"diff\xe9rence",chance:"Chance",brelan:"Brelan",pt_suite:"Petite Suite",gr_suite:"Grande Suite",full:"Full",carre:"Carr\xe9",yams:"Yam's",bonus:"bonus (>63)"},readonly:["total","bonus","diff","TOTAL"],players:[],show_modal_new_player:!1,show_modal_rename_player:!1},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=null;this.state.show_modal_new_player&&(t=r.a.createElement(f,{width:"360px",height:"350px",focus:function(){e.textInput.focus()},close:this.toggle_modal_new_player},r.a.createElement("form",{action:"#"},r.a.createElement("label",null,"Nom du joueur :"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"new_player_name",ref:function(t){return e.textInput=t}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.add_player,id:"new_player_submit"},"Ajouter"),r.a.createElement("br",null),r.a.createElement("br",null),"Choix rapide :",r.a.createElement("br",null),r.a.createElement("button",{className:"immed",onClick:function(t){e.add_player(t,"Claude")}},"Claude"),r.a.createElement("button",{className:"immed",onClick:function(t){e.add_player(t,"Martine")}},"Martine"),r.a.createElement("button",{className:"immed",onClick:function(t){e.add_player(t,"Eric")}},"Eric"),r.a.createElement("button",{className:"immed",onClick:function(t){e.add_player(t,"Erlina")}},"Erlina"),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("button",{className:"immed large",onClick:function(t){e.add_player(t,"Alexandre")}},"Alexandre"),r.a.createElement("button",{className:"immed large",onClick:function(t){e.add_player(t,"Fran\xe7oise")}},"Fran\xe7oise")))));var n=null;return this.state.show_modal_rename_player&&(n=r.a.createElement(f,{width:"360px",height:"410px",focus:function(){e.textInput.focus()},close:this.toggle_modal_rename_player},r.a.createElement("form",{action:"#"},r.a.createElement("label",null,"Nom du joueur :"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",id:"rename_player_name",ref:function(t){return e.textInput=t},value:this.state.show_modal_rename_player_new_name,onChange:this.rename_change}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.rename_player,id:"rename_player_submit"},"Renommer"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.delete_player,id:"delete_player_submit"},"Supprimer"),r.a.createElement("br",null),r.a.createElement("br",null),"Choix rapide :",r.a.createElement("br",null),r.a.createElement("button",{className:"immed",onClick:function(t){e.rename_player(t,"Claude")}},"Claude"),r.a.createElement("button",{className:"immed",onClick:function(t){e.rename_player(t,"Martine")}},"Martine"),r.a.createElement("button",{className:"immed",onClick:function(t){e.rename_player(t,"Eric")}},"Eric"),r.a.createElement("button",{className:"immed",onClick:function(t){e.rename_player(t,"Erlina")}},"Erlina"),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("button",{className:"immed large",onClick:function(t){e.add_player(t,"Alexandre")}},"Alexandre"),r.a.createElement("button",{className:"immed large",onClick:function(t){e.add_player(t,"Fran\xe7oise")}},"Fran\xe7oise"))))),r.a.createElement("div",{id:"App"},r.a.createElement(_,{players:this.state.players,rows:this.state.rows,readonly:this.state.readonly,rowname:this.state.rowname,show_new_player:this.toggle_modal_new_player,new_game:this.new_game,tap:this.cell_tapped,fullscreen:this.toggleFullScreen}),t,n)}},{key:"componentDidMount",value:function(){document.title="Yam's!",alert("=== CHANGEMENTS R\xc9CENTS (19 Janvier 2020) ===\n- Alignement sur les r\xe8gles du Yam's 1985 :\n      - Le bonus est pass\xe9 de 30 \xe0 35 points\n      - La Petite Suite \xe0 \xe9t\xe9 ajout\xe9\xe9 et vaut 20 points\n         (la Petite Suite c'est 4 d\xe9s dont les chiffres se suivent)\n      - La Suite est pass\xe9e \xe0 25 points et s'appelle \"Grande Suite\"\n- Ajout de nouveaux noms : Alexandre & Fran\xe7oise")}},{key:"toggleFullScreen",value:function(){(document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen)&&!document.msFullscreenElement?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen?document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},8:function(e,t,n){e.exports=n(18)}},[[8,2,1]]]);
//# sourceMappingURL=main.0d23c8be.chunk.js.map